#import "lib/lib.typ": *
#show: chapter-style.with(
  title: "几何变换",
  info: info,
)

= 仿射变换

仿射变换（affine transformation）一种二维坐标到二维坐标之间的线性变换，其中，仿射（affine）一词源于拉丁语中的 _affined_，意为关系密切的。

设$𝑨$为$n$阶实方阵，$𝒃$是$n$维向量，定义于几何空间$ℝ^n$的仿射变换具有下列形式：

$ T(𝒙) = 𝑨 𝒙 + 𝒃 $

仿射变换可以通过一系列的线性变换变换的复合来实现，包括：缩放（scale）、翻转（flip）、剪切（shear）、平移（translation）和旋转（rotation）。

#tip[
  当平移量为零，即原点不变，仿射变换为线性变换。
]

仿射变换有两个特殊的性质：

- 平直性（straightness）：$ℝ^n$内经仿射变换的任一直线的像（image）仍是直线，的任一圆弧的像（image）仍是圆弧
- 平行性（parallelness）：经过仿射变换的二维图形间的相对位置关系不变

= 直角坐标变换
<直角坐标变换>

== 缩放矩阵
<缩放矩阵>

矩阵的缩放，是对矩阵的主对角元进行操作，如

$ 𝑨 = dmat(delim: "[", k_1, k_2) $

通过左乘$𝑨 𝒂$，使得$𝒂$纵向被缩放了$k$倍。

== 翻转矩阵
<翻转矩阵>

矩阵的翻转，也对矩阵的主对角元进行操作，其行列式恒等于$-1$，如

$ 𝑨 = admat(delim: "[", 1, 1) $

通过左乘$𝑨 𝒂$，使得$𝒂$行列进行了交换。
又如

$
  𝑨_1 = dmat(delim: "[", -1, 1),
  𝑨_2 = dmat(delim: "[", 1, -1)
$

通过左乘$𝑨_1 𝒂$或$𝑨_2 𝒂$，可使$𝒂$相对横轴或纵轴翻转$180°$。

对矩阵

$
  𝑨 = frac(1, norm(𝛕)^2) mat(delim: "[", τ_1^2 - τ_2^2, 2τ_1 τ_2; 2τ_1 τ_2, τ_2^2 - τ_1^2)
$

通过左乘$𝑨 𝒂$，使得$𝒂$相对于切向量$𝛕 = vec(τ_1, τ_2)$翻转了$180°$。

== 剪切矩阵
<剪切矩阵>

剪切可以被认为是一种平移，是对主对角元以外的元素进行操作，对矩阵

$ 𝑨 = mat(delim: "[", 1, k; 0, 1) $

其列向量为

$ 𝒄_1 = mat(delim: "[", 1; 0) = 𝒆_1, 𝒄_1 = mat(delim: "[", k; 1) = k 𝒆_1 + 𝒆_2 $

通过左乘$𝑨 𝒂$，相当于将$𝒂$在横行上平移了$k$个单位。

实际上，一个矩阵加上另一个矩阵，即可完成平移。如

$
  dmat(delim: "[", 1, 1)
  + admat(delim: "[", 1, 0)
  = mat(delim: "[", 1, 1; 0, 1)
$

也可以夹角为基准理解剪切，对矩阵

$ 𝑨 = mat(delim: "[", 1, cot θ; 0, 1) $

通过左乘$𝑨 𝒂$，，相当于将$𝒂$相对于纵轴以夹角$θ$，在横向进行了平移。

类似地，左乘矩阵

$ 𝑨 = mat(delim: "[", 1, 0; cot θ, 1) $

是相对横轴操作。

= 极坐标变换
<极坐标变换>

== 二维旋转矩阵
<二维旋转>

标准正交阵$𝑸$，也称旋转矩阵，其将任意向量逆时针旋转$θ$，其逆阵$𝑸^(-1)$将任意向量顺时针旋转$θ$。

#tip[
  不难知道，所有旋转矩阵的行列式都等于$1$。
]

如下矩阵

$ 𝑨_("2d") = rot2mat(delim: "[", θ) $

通过左乘$𝑨 𝒂 = 𝒃$，使得$𝒃$相对$𝒂$围绕原点逆时针旋转了$θ$。

类似地，左乘矩阵是顺时针旋转$θ$。

$ 𝑨_("2d") = mat(delim: "[", cos θ, sin θ; -sin θ, cos θ) $

进一步可得，矩阵

$ 𝑨_("2d") = mat(delim: "[", cos 2θ, sin 2θ; sin 2θ, -cos 2θ) $

是逆时针旋转$2θ$，相对于横轴夹角$θ$呈轴对称。

== 三维旋转矩阵
<三维旋转>

- 围绕 Z 轴旋转的角度 θ

$ 𝑨_("3dz") = rot3zmat(delim: "[", θ) $

请注意，Z 坐标仍然不受这种旋转的影响，即

$
  rot3zmat(delim: "[", θ)
  mat(delim: "[", x; y; z) = mat(delim: "[", ⋅; ⋅; z)
$

- 围绕 X 轴旋转的角度 θ

$ 𝑨_("3dx") = rot3xmat(delim: "[", θ) $

请注意，X 坐标仍然不受这种旋转的影响，即

$
  rot3xmat(delim: "[", θ)
  mat(delim: "[", x; y; z) = mat(delim: "[", x; ⋅; ⋅)
$

- 围绕 Y 轴旋转的角度 θ

$ 𝑨_("3dy") = rot3ymat(delim: "[", θ) $

请注意，Y 坐标仍然不受这种旋转的影响，即

$
  rot3ymat(delim: "[", θ)
  mat(delim: "[", x; y; z) = mat(delim: "[", ⋅; y; ⋅)
$

== 旋转与正交
<旋转与正交>

矩阵$𝑹$是正交的，当且仅当其转置也是其逆时，即

$ 𝑹^⊤ 𝑹 = 𝑹 𝑹^⊤ = 𝑰 $

所有的旋转矩阵都是正交阵。所有正交阵都代表某种旋转。

- 正交性意味着旋转是长度保守的
- 旋转的角度求负数，相当于对旋转矩阵求逆，相当于对旋转矩阵转置
旋转矩阵的特征值和特征向量

$
  & 𝒙^⊤ 𝑹^⊤(𝑹 𝒙) = λ 𝒙^⊤(λ 𝒙)\
  ⇔ & 𝒙^⊤(𝑹^⊤ 𝑹) 𝒙 = λ^2 𝒙^⊤ 𝒙\
  ⇔ & 𝒙^⊤ 𝒙 = λ^2 𝒙^⊤ 𝒙\
  ⇔ & λ^2 = 1 ⇔ λ = 1
$

- 旋转矩阵总有特征值$1$
- 旋转矩阵的特征向量是旋转的轴- 在三维中，另外 2 个特征值将是复数，产生旋转的角度

= 投影变换

投影变换是一种降维变换，其变换矩阵的行列式恒等于$0$。

== 轴投影矩阵

对矩阵

$
  𝑨_1 = dmat(delim: "[", 1, 0),
  𝑨_2 = dmat(delim: "[", 1, 1)
$

通过左乘$𝑨_1 𝒂$或$𝑨_2 𝒂$，可得$𝒂$在横轴或纵轴的投影。

== 切向量投影矩阵

对矩阵

$ 𝑨 = frac(1, norm(𝛕)^2) mat(delim: "[", τ_1^2, τ_1 τ_2; τ_1 τ_2, τ_2^2) $

通过左乘$𝑨 𝒂$，可得$𝒂$在切向量$𝛕 = vec(τ_1, τ_2)$上的投影。

= 归纳

#figure(
  table(
    columns: 4,
    align: center + horizon,
    inset: 4pt,
    stroke: table-three-line(rgb("000")),
    [*变换矩阵*], [*行列式*], [*变换矩阵*], [*行列式*],
    [缩放矩阵], [$|𝑨|$], [翻转矩阵], [$-1$],
    [旋转矩阵], [$1$], [投影矩阵], [$0$],
  ),
  caption: "几何变换矩阵的特征值",
  supplement: "表",
  kind: table,
)
